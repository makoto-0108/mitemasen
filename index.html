<!-- çœç•¥ã•ã‚Œãšå…¨æ–‡å…¥ã£ã¦ã„ã¾ã™ï¼ˆã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ã¦ç¶šãã‚‚ç¢ºèªã—ã¦ãã ã•ã„ï¼‰ -->
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ã¿ã¦ã¾ã›ã‚“ã€‚</title>

  <link href="https://fonts.googleapis.com/css2?family=Kosugi+Maru&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: 'Kosugi Maru', sans-serif;
      background-color: #000;
      color: #fff;
      text-align: center;
      padding: 2em;
    }

    .container {
      background-color: #ffffffcc;
      color: #000;
      border-radius: 1em;
      padding: 2em;
      max-width: 480px;
      margin: 0 auto;
      box-shadow: 0 4px 12px rgba(255, 255, 255, 0.2);
    }

    .header-png {
      width: 100%;
      max-width: 300px;
      height: auto;
      display: block;
      margin: 0 auto 1.5em;
      border-radius: 1em;
    }

    .slogan {
      font-size: 1.2em;
      color: #4a5a2a;
      margin-bottom: 1.5em;
      font-style: italic;
      font-weight: 600;
      text-shadow: 1px 1px 2px #ccc;
    }

    .cat-image {
      width: 150px;
      height: auto;
      margin: 1em auto;
      display: block;
      transition: transform 0.3s ease;
    }

    .points {
      font-size: 1.5em;
      margin-bottom: 1em;
    }

    button {
      font-size: 1em;
      padding: 0.6em 1.2em;
      margin: 0.5em;
      border: none;
      border-radius: 0.5em;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    .good {
      background-color: #d3f3e2;
    }

    .bad {
      background-color: #f8d2d2;
    }

    .lucky-message {
      margin-top: 1em;
      font-size: 1.1em;
      font-weight: bold;
      color: #5e793f;
      min-height: 2em;
    }

    .message {
      margin-top: 1em;
      font-size: 1.2em;
      min-height: 2em;
    }

    table {
      margin-top: 2em;
      width: 100%;
      max-width: 400px;
      margin-left: auto;
      margin-right: auto;
      border-collapse: collapse;
      background: #fff;
      color: #000;
      border-radius: 0.5em;
      overflow: hidden;
    }

    th, td {
      padding: 10px;
      border: 1px solid #ccc;
    }

    th {
      background-color: #e0e0e0;
    }

    .intro {
      background-color: #222;
      color: #eee;
      padding: 20px;
      border-radius: 12px;
      max-width: 480px;
      margin: 1em auto;
      font-family: 'Kosugi Maru', sans-serif;
      position: relative;
      box-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
      text-align: left;
    }

    .intro h2 {
      font-size: 1.4em;
      margin-top: 0;
      color: #f0c040;
    }

    .intro p {
      font-size: 1em;
      line-height: 1.5;
    }

    #closeIntro {
      position: absolute;
      top: 10px;
      right: 10px;
      background: transparent;
      color: #f0c040;
      border: 1px solid #f0c040;
      border-radius: 6px;
      padding: 4px 8px;
      cursor: pointer;
    }
  </style>
</head>
<body>

<div id="intro" class="intro">
  <h2>ã€Œã¿ã¦ã¾ã›ã‚“ã€‚ã€ã¨ã¯ï¼Ÿ</h2>
  <p>
    å¤œé…ãã‚¹ãƒãƒ›ã‚’è¦‹ã™ãã¦ã—ã¾ã†ã‚ãªãŸã¸ã€‚<br>
    ã“ã®ã‚¢ãƒ—ãƒªã¯ã€Œã‚¹ãƒãƒ›ã‚’è¦‹ãªã„æ™‚é–“ã€ã‚’ãƒã‚¤ãƒ³ãƒˆï¼ˆã­ã‚€ãƒï¼‰ã§æ¥½ã—ãè¨˜éŒ²ã—ã€æ—©å¯ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ã€‚<br>
    ã€Œè¦‹ã¦ãªã„ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ã€ã­ã‚€ãƒã‚’ãŸã‚ã¦ã„ãã¾ã—ã‚‡ã†ï¼
  </p>
  <button id="closeIntro">é–‰ã˜ã‚‹</button>
</div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const intro = document.getElementById('intro');
    const closeBtn = document.getElementById('closeIntro');
    const hasSeen = localStorage.getItem('hasSeenIntro');

    if (hasSeen) {
      intro.style.display = 'none';
    }

    closeBtn.addEventListener('click', () => {
      intro.style.display = 'none';
      localStorage.setItem('hasSeenIntro', 'true');
    });
  });
</script>

  <div class="container">
    <img src="header.png" alt="ã¿ã¦ã¾ã›ã‚“ãƒ˜ãƒƒãƒ€ãƒ¼ç”»åƒ" class="header-png" />
    <h2 class="slogan">å¤œãµã‹ã—ã‚¹ãƒãƒ›ã«ã•ã‚ˆã†ãªã‚‰ã€‚</h2>
    <img id="catImage" src="cat_normal.png" alt="é»’çŒ«ã¡ã‚ƒã‚“" class="cat-image" />
    <div class="points">ã­ã‚€ãƒï¼š<span id="points">0</span>pt</div>
    <button class="good" onclick="reportNoLook()">ğŸ± è¦‹ã¦ãªã„ï¼</button>
    <button class="bad" onclick="reportLooked()">ğŸ“± è¦‹ã¡ã‚ƒã£ãŸâ€¦</button>

    <div class="lucky-message" id="luckyMessage"></div>
    <div class="message" id="message"></div>

    <table id="historyTable">
      <thead>
        <tr><th>æ—¥ä»˜</th><th>çµæœ</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <script>
    const pointEl = document.getElementById("points");
    const messageEl = document.getElementById("message");
    const luckyEl = document.getElementById("luckyMessage");
    const catImage = document.getElementById("catImage");
    const historyTable = document.getElementById("historyTable").querySelector("tbody");

    const CAT_NORMAL = "cat_normal.png";
    const CAT_RIBBON = "cat_ribbon.png";
    const CAT_HAT = "cat_hat.png";
    const CAT_CROWN = "cat_crown.png";

    const today = new Date().toLocaleDateString("ja-JP");

    const praises = [
      "ãˆã‚‰ã„ã«ã‚ƒï¼ğŸ¾", "ä»Šæ—¥ã‚‚ãŒã‚“ã°ã£ãŸã­ï¼ğŸ˜º", "ã‚ˆãå¯ã‚ŒãŸã‹ã«ã‚ƒï¼ŸğŸ’¤",
      "ã‚¹ãƒãƒ›è¦‹ãªã‹ã£ãŸã®ã€å¤©æ‰ã˜ã‚ƒã‚“ï¼âœ¨", "ãŠã—ã‚ƒã‚Œã‚¢ãƒƒãƒ—ã§æ°—åˆ†ã‚‚ã‚¢ã‚²ã‚¢ã‚²ï¼"
    ];

    const comforts = [
      "ã¾ãŸæ˜æ—¥ãŒã‚ã‚‹ã«ã‚ƒã€‚ğŸˆ", "ã¤ã„è¦‹ã¡ã‚ƒã†æ—¥ã‚‚ã‚ã‚‹ã•ã€œ",
      "ãŒã‚“ã°ã‚Šã™ããªã„ã§ã­ğŸ’¤", "ã­ã‚€ãƒã¯é€ƒã’ãªã„ã‚ˆâ€¦ï¼"
    ];

    const luckyMessages = [
      "ä»Šæ—¥ã¯ãƒ©ãƒƒã‚­ãƒ¼çŒ«ãŒã¤ã„ã¦ã‚‹ã‹ã‚‚ï¼", "å¿˜ã‚Œç‰©ã«æ³¨æ„ã—ã¦ã­ï¼", "ç´ æ•µãªå¶ç„¶ãŒèµ·ãã‚‹äºˆæ„Ÿï¼",
      "é“ã°ãŸã«ãƒ©ãƒƒã‚­ãƒ¼ãŒè½ã¡ã¦ã‚‹ã‹ã‚‚ï¼Ÿ", "ç¬‘é¡”ã§1æ—¥ãŒå¤‰ã‚ã‚‹ã‚ˆâœ¨", "ã‚«ãƒ•ã‚§ã®éš…ã«ãƒãƒ£ãƒ³ã‚¹ã‚ã‚Šï¼",
      "ä»Šæ—¥ã¯ã‚¹ãƒƒã‚­ãƒªèµ·ãã‚‰ã‚Œã‚‹ã‹ã‚‚ï¼", "ã„ã„å¤¢è¦‹ã‚‰ã‚Œã‚‹ã‹ã«ã‚ƒï¼Ÿ", "ã¡ã‚‡ã£ã¨ã ã‘æ—©æ­©ããŒå‰â—",
      "æ€ã„åˆ‡ã£ã¦è©±ã—ã¦ã¿ã‚ˆã†ï¼", "è‡ªåˆ†ã‚’è¤’ã‚ã¦ã„ã„æ—¥ã ã‚ˆ", "éŸ³æ¥½ã«ç™’ã•ã‚Œã¦ã¿ã¦ğŸµ",
      "çŒ«ãŒã„ãŸã‚‰æŒ¨æ‹¶ã—ã‚ˆã†", "æ–°ã—ã„ãŠè“å­ã‚’è©¦ã—ã¦ã¿ã¦ï¼", "ãƒ©ãƒƒã‚­ãƒ¼ãƒŠãƒ³ãƒãƒ¼ã¯3ğŸ¾",
      "é´ã²ã‚‚ã€ã¡ã‚ƒã‚“ã¨çµã¹ã¦ã‚‹ï¼Ÿ", "ã‚ã£ãŸã‹ã„é£²ã¿ç‰©ãŒå¿ƒã‚’ã»ãã™ã‚ˆâ˜•", "ã„ã¤ã‚‚ã‚ˆã‚Šæ·±å‘¼å¸ã‚’å¤šã‚ã«ï¼",
      "ã‚«ãƒãƒ³ã®ä¸­ã‚’æ•´ç†ã™ã‚‹ã¨é‹æ°—UP", "è¦ªåˆ‡ã‚’ã™ã‚‹ã¨2å€è¿”ã£ã¦ãã‚‹ã‹ã‚‚", "ã”ã»ã†ã³ã‚’ã‚ã’ã‚ˆã†ï¼",
      "èº«è¿‘ãªäººã«ã€Œã‚ã‚ŠãŒã¨ã†ã€ã‚’", "ã„ã„é¦™ã‚Šã‚’æ¢ã—ã¦ã¿ã¦ğŸŒ¸", "ç·‘ã‚’è¦‹ã‚‹ã¨è½ã¡ç€ãã«ã‚ƒğŸŒ¿",
      "ä»Šæ—¥ã¯ã‚¿ã‚¤ãƒŸãƒ³ã‚°ãŒçµ¶å¦™ã‹ã‚‚ï¼", "ã¾ã‚†ã’æ•´ãˆã‚‹ã¨é‹æ°—UP", "å°ã•ãªå¹¸ã›ã«æ°—ã¥ã‘ã‚‹æ—¥ğŸŒ",
      "æ€ã„åˆ‡ã£ã¦ã‚„ã£ã¦ã¿ã‚‹ã¨å‰", "ä»Šæ—¥ã®ãƒ©ãƒƒã‚­ãƒ¼ã‚¢ã‚¤ãƒ†ãƒ ã¯ã€æ–‡æˆ¿å…·ã€", "ç©ºã‚’è¦‹ä¸Šã’ã¦ãƒªã‚»ãƒƒãƒˆã—ã‚ˆã†"
    ];

    function updateCatImage(points) {
      if (points >= 7) catImage.src = CAT_CROWN;
      else if (points >= 4) catImage.src = CAT_HAT;
      else if (points >= 2) catImage.src = CAT_RIBBON;
      else catImage.src = CAT_NORMAL;
    }

    function getPoints() {
      return parseInt(localStorage.getItem("points") || "0");
    }

    function setPoints(val) {
      localStorage.setItem("points", val);
      pointEl.textContent = val;
      updateCatImage(val);
    }

    function getHistory() {
      return JSON.parse(localStorage.getItem("history") || "{}");
    }

    function saveHistory(history) {
      localStorage.setItem("history", JSON.stringify(history));
    }

    function alreadyReported() {
      return getHistory()[today] !== undefined;
    }

    function setReported(result) {
      const history = getHistory();
      history[today] = result;
      saveHistory(history);
      renderHistory();
    }

    function reportNoLook() {
      if (alreadyReported()) {
        messageEl.textContent = "ä»Šæ—¥ã¯ã‚‚ã†è¨˜éŒ²æ¸ˆã¿ã ã‚ˆğŸ¾";
        return;
      }
      const newPoints = getPoints() + 1;
      setPoints(newPoints);
      setReported("ğŸ± +1pt");
      messageEl.textContent = newPoints >= 7 ? "ç‹å† ã‚²ãƒƒãƒˆï¼ãˆã‚‰ã™ãã‚‹ã«ã‚ƒã€œğŸ‘‘" : randomItem(praises);
    }

    function reportLooked() {
      if (alreadyReported()) {
        messageEl.textContent = "ä»Šæ—¥ã¯ã‚‚ã†è¨˜éŒ²æ¸ˆã¿ã ã‚ˆğŸ¾";
        return;
      }
      setReported("ğŸ“± 0pt");
      messageEl.textContent = randomItem(comforts);
    }

    function renderHistory() {
      const history = getHistory();
      const dates = Object.keys(history).sort((a, b) => new Date(b) - new Date(a)).slice(0, 7);
      historyTable.innerHTML = "";
      dates.forEach(date => {
        const row = document.createElement("tr");
        row.innerHTML = `<td>${date}</td><td>${history[date]}</td>`;
        historyTable.appendChild(row);
      });
    }

    function randomItem(arr) {
      return arr[Math.floor(Math.random() * arr.length)];
    }

    function showLuckyMessage() {
      const key = "lucky_" + today;
      let msg = localStorage.getItem(key);
      if (!msg) {
        msg = randomItem(luckyMessages);
        localStorage.setItem(key, msg);
      }
      luckyEl.textContent = "ğŸ”® ä»Šæ—¥ã®ã²ã¨ã“ã¨é‹å‹¢ï¼š " + msg;
    }

    // åˆæœŸåŒ–å‡¦ç†
    setPoints(getPoints());
    renderHistory();
    showLuckyMessage();
  </script>
</body>
</html>
